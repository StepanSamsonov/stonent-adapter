version: '3'

services:
  ml:
    image: stonent/adapter-ml
    depends_on:
      - rabbitmq
      - postgres
  loader:
    image: stonent/adapter-loader
    depends_on:
      - rabbitmq
      - postgres
      - ml
  rabbitmq:
    image: stonent/adapter-rabbitmq
    restart: always
    volumes:
      - rabbitmq:/var/lib/rabbitmq
  postgres:
      image: stonent/adapter-postgres
      restart: always

volumes:
  rabbitmq:
    driver: local
